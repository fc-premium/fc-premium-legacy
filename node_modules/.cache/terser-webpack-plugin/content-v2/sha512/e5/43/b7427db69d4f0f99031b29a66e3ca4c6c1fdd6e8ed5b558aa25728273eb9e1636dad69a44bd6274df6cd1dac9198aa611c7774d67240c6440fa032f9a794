{"code":"!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=25)}([function(t,e,r){\"use strict\";r.d(e,\"d\",function(){return i}),r.d(e,\"a\",function(){return s}),r.d(e,\"e\",function(){return o}),r.d(e,\"b\",function(){return a}),r.d(e,\"c\",function(){return u});var n=r(14);window=unsafeWindow;let i=n(\"sha256\").update(GM_info.scriptSource,\"utf8\").digest(\"hex\"),s=[];function o(t){s=t}const a=\"FC_MODULE_HANDLER\";void 0===GM_getValue(a)&&GM_setValue(a,{});const h=Object.freeze(Object.assign({},window.console)),u=new Headers;u.append(\"pragma\",\"no-cache\"),u.append(\"cache-control\",\"no-cache\"),Object.freeze(u),Object.defineProperties(window,{console:{value:h},jQuery:{value:jQuery},$:{value:jQuery}})},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return o});var n=r(6);class i{constructor(t,e,r){this.hostModule=t,this.referenceKey=e,this.__events__=new Map;let i=r.flags instanceof Array?r.flags:[];if(this.flags=new n.a(i),this.flags.isset(\"CONFIGURABLE\")||this.flags.isset(\"WIDGET\")){if(\"function\"!=typeof r.getter)throw[this.hostModule,\"A configurable config / widget needs a getter method\"];if(\"function\"!=typeof r.parser&&!this.flags.isset(\"WIDGET\"))throw\"A configurable config needs a parser method\";this.section=\"string\"==typeof r.section?r.section:\"General\";const t=r.getter.bind(this),e=\"function\"==typeof r.parser?r.parser.bind(this):()=>{};this.getHTML=function(e){return t(e)},this.parseHTML=function(t){return this.value=e(t),this.dispatchEvent(\"save\"),this.value},delete r.getter,delete r.parser}this.title=\"string\"==typeof r.title?r.title:\"\",this.description=r.description,this.defaultValue=r.defaultValue,this.value=this.defaultValue;const s=this;r.events instanceof Object&&Object.entries(r.events).forEach(([t,e])=>this.addEventListener(t,e.bind(s)))}addEventListener(t,e){if(\"string\"!=typeof t)throw\"type must be a string\";if(\"function\"!=typeof e)throw\"callback must be a function\";this.__events__.has(t)||this.__events__.set(t,[]),this.__events__.get(t).push(e)}removeEventListener(t,e=null){if(!this.__events__.has(t))return;null===e&&this.__events__.set(t,[]);let r=this.__events__.get(t).filter(t=>t!==e);this.__events__.set(t,r)}dispatchEvent(t,...e){this.__events__.has(t)&&this.__events__.get(t).forEach(t=>{try{t(this,...e)}catch(t){}})}}class s extends i{constructor(t,e,r){super(t,e.referenceKey,r),this.hook=e,Object.defineProperties(this,{value:{get:()=>this.hook.value,set:t=>this.hook.value=t},defaultValue:{get:()=>this.hook.defaultValue,set:t=>this.hook.defaultValue=t}})}}class o{constructor(t){this.__config=new Map,this.hostModule=t,o.DEFAULT_CONFIG.forEach(([t,e])=>this.define(t,e))}get(t){return this.__config.has(t)?this.__config.get(t).value:void 0}getMeta(t){return this.__config.get(t)}set(t,e,r=!0){if(this.__config.has(t)){const r=this.__config.get(t);r instanceof s?r.hook.hostModule.config.set(r.referenceKey,e):(r.value=e,this.__config.set(t,r))}return!0===r&&this.saveConfig(),this}keys(){return Array.from(this.__config.keys())}has(t){return this.__config.has(t)}reset(t,e=!0){let r=this.__config.get(t);return r.value=r.defaultValue,this.__config.set(t,r),!0===e&&this.saveConfig(),this}resetAll(t=!0){return this.keys().forEach(t=>{this.reset(t,!1)}),!0===t&&this.saveConfig(),this}define(t,e){if(this.__config.has(t))throw\"Config key already exists\";return this.__config.set(t,new i(this.hostModule,t,e)),this}undefine(t){this.__config.delete(t);let e=this.hostModule.storage.get(\"config\");delete e[t],this.hostModule.storage.set(\"config\",e)}hook(t,e,r,n){if(!t.config.has(e))throw\"Config hook key does not exists\";if(this.__config.has(r))throw\"Config hook newKey already exists\";let i=new s(this.hostModule,t.config.getMeta(e),n);return this.__config.set(r,i),this}loadSavedConfig(){let t=this.hostModule.storage.get(\"config\");void 0===t?this.saveConfig():this.importConfig(t)}saveConfig(){const t=this.hostModule.storage.has(\"config\")?this.hostModule.storage.get(\"config\"):{},e=this.exportConfig();Object.assign(t,e),this.hostModule.storage.set(\"config\",t)}importConfig(t){Object.keys(t).forEach(e=>{this.__config.has(e)&&this.set(e,t[e],!1)})}exportConfig(){const t={};return this.keys().forEach(e=>{let r=this.__config.get(e);r instanceof s||r.flags.isset(\"WIDGET\")||(t[e]=r.value)}),t}}Object.defineProperty(o,\"HTML\",{get:()=>({INPUT:{GETTER:(t,e={})=>{let r=$(\"<input>\");return r[0].value=t,Object.entries(e).forEach(([t,e])=>{r[0].setAttribute(t,e)}),r},PARSER:t=>t.find(\"input\").val()},TEXTAREA:{GETTER:(t,e={})=>{let r=$(\"<textarea>\");return r[0].value=t,Object.entries(e).forEach(([t,e])=>{r[0].setAttribute(t,e)}),r},PARSER:t=>t.find(\"textarea\").val()},SELECT:{GETTER:(t=[],e=0,r={})=>{let n=$(\"<select>\");return e=e>=t.length?t.length-1:e,t.forEach((t,e)=>{let r=$(\"<option>\");r[0].setAttribute(\"value\",e.toString()),r[0].innerText=t,n.append(r)}),Object.entries(r).forEach(([t,e])=>{n[0].setAttribute(t,e)}),n.find(\"option\")[e%t.length].setAttribute(\"selected\",\"\"),n},PARSER:t=>t.find(\"select\")[0].selectedIndex},SWITCH:{GETTER:(t=!1)=>{let e=performance.now(),r=$(`<input class=\"toogle\" type=\"checkbox\" id=\"${e}\"><label class=\"toogle\" for=\"${e}\">Toggle</label>`);return r[0].checked=t,r},PARSER:t=>t.find(\"input\")[0].checked},HOTKEY:{GETTER:(t,e=null)=>{let r=o.HTML.INPUT.GETTER(t,{type:\"text\",class:\"fancy-input disabled mousetrap hotkey\",readonly:!0}),n=null,i=!1;try{let t=$.data(document,\"events\").click.filter(t=>\".fancy-input.mousetrap.hotkey\"==t.selector)[0];$(document).off(t.origType,t.selector,t.handler)}catch(t){}return $(document).on(\"click\",\".fancy-input.mousetrap.hotkey\",function(){let t=this;if(null===n){if(\"function\"!=typeof r)var r=t=>{this.a=t};n=new r(this)}i=!0,tList.remove(\"disabled\"),this.addEventListener(\"blur\",function(){i=!1,tList.add(\"disabled\")}),n.handleKey=function(r,n,s){if(s.preventDefault(),s.stopPropagation(),1==i&&\"keydown\"==s.type&&!1===s.repeat)if(1==r.length){let o=Array.from(new Set([...n.reverse(),r])).join(\"+\").toLowerCase();if(\"function\"==typeof e&&!1===e(r,n,s))return!1;i=!1,tList.add(\"disabled\"),t.value=o}else\"esc\"===r&&(i=!1,tList.add(\"disabled\"))}}),r},PARSER:t=>t.find(\"input\")[0].value},COLOR:{GETTER:(t,e={})=>{let r=$('<input type=\"color\">');return r[0].value=t,Object.entries(e).forEach(([t,e])=>{r[0].setAttribute(t,e)}),r},PARSER:t=>o.HTML.INPUT.PARSER(t)},BUTTON:{GETTER:(t,e={})=>{let r=$('<input type=\"button\">');return r[0].value=t,Object.entries(e).forEach(([t,e])=>{r[0].setAttribute(t,e)}),r}}})}),Object.defineProperty(o,\"DEFAULT_CONFIG\",{get:()=>[[\"ENABLED\",{title:\"Enabled\",defaultValue:!0,flags:[\"CONFIGURABLE\"],getter:function(){return o.HTML.SWITCH.GETTER(this.value)},parser:function(t){let e=this.value,r=o.HTML.SWITCH.PARSER(t);return e!==r&&(this.value=r,r?this.hostModule.load(!1):this.hostModule.unload()),r}}],[\"DEBUG_MODE\",{title:\"Debug Mode\",defaultValue:!1,flags:[\"CONFIGURABLE\"],section:\"Debug\",getter:function(){return o.HTML.SWITCH.GETTER(this.value)},parser:o.HTML.SWITCH.PARSER,events:{HTMLAppended:function(t,e){$(e).find(\"input\")[0].addEventListener(\"change\",function(){t.value=this.checked})}}}],[\"DEBUG_MODULE_NAME\",{title:\"Show module name\",value:!0,defaultValue:!0}]]})},function(t,e,r){var n=r(17),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(t,e,r){if(\"number\"==typeof t)throw new TypeError(\"Argument must not be a number\");return i(t,e,r)},o.alloc=function(t,e,r){if(\"number\"!=typeof t)throw new TypeError(\"Argument must be a number\");var n=i(t);return void 0!==e?\"string\"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if(\"number\"!=typeof t)throw new TypeError(\"Argument must be a number\");return i(t)},o.allocUnsafeSlow=function(t){if(\"number\"!=typeof t)throw new TypeError(\"Argument must be a number\");return n.SlowBuffer(t)}},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return u});var n=r(1),i=r(10),s=r(8),o=r(9),a=r(6),h=r(0);class u{constructor(t){if(this.debug=new s.a(this),this.storage=new o.a(this),this.config=new n.a(this),this.styles=new i.a(this),this.moduleName=t.moduleName,this.info=Object.freeze({title:t.title,description:t.description,author:t.author,version:t.version}),this.require=t.require instanceof Array?t.require:[],this.preload=t.preload instanceof Array?t.preload:[],this.hasMobileSupport=\"boolean\"==typeof t.hasMobileSupport&&t.hasMobileSupport,Object.freeze(this.require),Object.freeze(this.preload),this.match=t.match,this.flags=new a.a(t.flags instanceof Array?t.flags:[]),this.runat=t.runat,!(this.match instanceof Array)||0===this.match.length)throw\"URL matches must be a non-empty array\";if(this.match.forEach((t,e)=>{if(\"string\"==typeof t)\"-._~:/?#[]@!$&'()+,;=\".split(\"\").forEach(e=>{t=t.replace(e,\"\\\\\"+e)}),this.match[e]=new RegExp(\"^\"+t.replace(\"*\",\".*\")+\"$\");else if(!(t instanceof RegExp))throw\"Url match must be either a string or a RegExp\"}),Object.freeze(this.match),this.onload=t.onload instanceof Function?t.onload:()=>{},this.onunload=t.onunload instanceof Function?t.onunload:()=>{},this.loaded=!1,!Object.keys(GM_getValue(h.b)).includes(this.moduleName)){let t=GM_getValue(h.b);t[this.moduleName]={},GM_setValue(h.b,t)}}load(t=!0){let e=this;t&&this.config.loadSavedConfig();let r=this.require.every(t=>{let r=h.a.get(t);return r.loaded||e.debug.error(`Required module \"${t}\" not loaded or enabled`),r.loaded});if(!e.loaded&&e.config.get(\"ENABLED\")&&r&&(r=!e.match.every(t=>!t.test(location.pathname+location.search)))){let t=this.preload.map(t=>new Promise(function(e){let r=$(\"<script>\");$(\"html > head\").append(r),r[0].onload=function(){e()},r.attr(\"src\",t)}));Promise.all(t).then(function(){\"loading\"===document.readyState&&\"load\"===e.runat?window.addEventListener(\"DOMContentLoaded\",function(){e.onload()}):e.onload()}),this.loaded=!0}return r}unload(){this.loaded&&(this.onunload(),this.loaded=!1)}}},function(t,e){\"function\"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){var n=r(2).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){\"string\"==typeof t&&(e=e||\"utf8\",t=n.from(t,e));for(var r=this._block,i=this._blockSize,s=t.length,o=this._len,a=0;a<s;){for(var h=o%i,u=Math.min(s-a,i-h),l=0;l<u;l++)r[h+l]=t[a+l];a+=u,(o+=u)%i==0&&this._update(r)}return this._len+=s,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s},i.prototype._update=function(){throw new Error(\"_update must be implemented by subclass\")},t.exports=i},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return n});class n{constructor(t){this.__flags=new Set(t)}isset(...t){return t.every(t=>this.__flags.has(t))}unset(...t){t.forEach(t=>this.__flags.delete(t))}set(...t){t.forEach(t=>this.__flags.add(t))}flags(){return Array.from(this.__flags.keys())}clear(){this.__flags.clear()}}},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return n}),String.prototype.removeTildes=function(){return this.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g,\"\")},FormData.prototype.toDataString=function(){return Array.from(this).reduce((t,e)=>(\"string\"==typeof t?`${t}&`:`${t[0]}=${escape(t[1])}&`)+`${e[0]}=${escape(e[1])}`)},Array.prototype.binarySearch=function(t,e=null,r=null){let n=0,i=Math.round(this.length/2),s=-1;for(e=\"function\"!=typeof e?t=>t:e,r=\"function\"!=typeof r?(t,e)=>t-e:r;-1==s&&i<this.length;){let o=r(e(this[i]),t);o<0?i+=Math.round((n+i)/2):o>0?i-=Math.round((n+i)/2):s=i,n=i}return s},JSON.safeParse=t=>{try{t=JSON.parse(t)}catch(e){t=void 0}return t},$.expr[\":\"].icontains=function(t,e,r){return jQuery(t).text().toUpperCase().indexOf(r[3].toUpperCase())>=0};const n=new class{constructor(){this.urls={thread:\"https://www.forocoches.com/foro/showthread.php?t=\",post:\"https://www.forocoches.com/foro/showthread.php?p=\",deletePost:\"https://www.forocoches.com/foro/editpost.php\",user:\"https://www.forocoches.com/foro/member.php?u=\",quote:\"https://www.forocoches.com/foro/newreply.php?do=newreply&p=\",newPost:\"https://www.forocoches.com/foro/newreply.php?do=postreply&t=\",private:\"https://www.forocoches.com/foro/private.php\",ignoreList:\"https://www.forocoches.com/foro/profile.php?do=ignorelist\",usercp:\"https://www.forocoches.com/foro/usercp.php?\"},this._isMobileVersion=\"m\"===location.host.split(\".\")[0]}utf8ToIso(t){let e=new TextDecoder(\"ISO-8859-1\");return t=new Uint8Array(t),e.decode(t)}parseHTML(t){return(new DOMParser).parseFromString(t,\"text/html\")}responseToHtml(t){return t.arrayBuffer().then(n.utf8ToIso).then(n.parseHTML)}get isMobileVersion(){return this._isMobileVersion}parseFCDate(t){if(\"string\"!=typeof t){let t=new Date;return t.setTime(NaN),t}t=t.trim().split(\" \");let e,r={ene:\"jan\",feb:\"feb\",mar:\"mar\",abr:\"apr\",may:\"may\",jun:\"jun\",jul:\"jul\",ago:\"aug\",sep:\"sep\",oct:\"oct\",nov:\"nov\",dic:\"dec\"},n=new Date;if(n.setTime(864e5*Math.floor(Date.now()/864e5)),\"Ayer\"===t[0]?n.setTime(n.getTime()-864e5):\"Hoy\"!==t[0]&&((e=t[0].split(\"-\"))[1]=r[e[1]],n=new Date(Date.parse(e.join(\"-\")))),t.length>1){let e=Date.parse(`1-1-1970 ${t[1]} GMT`);n.setTime(n.getTime()+e)}return n}getUserData(t){let e=this;return fetch(`${e.urls.user}${t}`).then(e.responseToHtml).then(t=>{let r={messageCount:null,messagesPerDay:null,signupDate:null,lastActivity:null};if(0!=$(t).find(\".panelsurround\").length){let n=$(t).find(\".statistics_group .shade\").parent().toArray().map(t=>{let e=t.innerText.split(\":\");return[e[0].removeTildes().trim(),e.slice(1).join(\":\")]});n=Object.fromEntries(n),r.messageCount=parseInt(n[\"Mensajes Total\"].replace(\".\",\"\")),r.messagesPerDay=parseFloat(n[\"Mensajes / Dia\"].replace(\",\",\".\")),r.lastActivity=e.parseFCDate(n[\"Ultima Actividad\"]),r.lastActivity=isNaN(r.lastActivity.getTime())?null:r.lastActivity,r.signupDate=e.parseFCDate(n[\"Fecha de Registro\"]),r.signupDate=isNaN(r.signupDate.getTime())?null:r.signupDate}return r})}getCurrentUserId(){let t,e;if(null!==this.__userid__)return this.__userid__;$.ajax({type:\"GET\",url:\"https://www.forocoches.com/foro/usercp.php\",success:function(e){t=(new DOMParser).parseFromString(e,\"text/html\")},async:!1});let r=$(t).find('a[href^=\"member.php?u\"]');return void 0!==(e=$(r[0]).attr(\"href\"))&&(e=e.split(\"=\")[1]),this.__userid__=parseInt(e),this.__userid__}checkThreadIsEchenique(t){let e=$(t).find(\".panelsurround\")[0].innerText.trim().removeTildes();return\"Ningun Tema especificado.\"===e||\"Tema especificado invalido.\"===e}checkThreadsOwner(t){let e=$(t).find(\".bigusername\")[0];return parseInt($(e).attr(\"href\").split(\"=\")[1])}postMessage(t,e){const r=this.getCurrentUserId();let n=this;return fetch(`${this.urls.thread}${t}`).then(this.responseToHtml).then(i=>{let s=$(i).find('[name*=\"token\"]')[0].value,o=new FormData,a=!1,h=!1;return o.set(\"securitytoken\",s),o.set(\"do\",\"postreply\"),o.set(\"loggedinuser\",r),o.set(\"message\",e),$.ajax({type:\"POST\",url:`${n.urls.newPost}${t}`,data:o.toDataString(),success:function(t){h=t,a=$(t).find(\"error\").toArray()}}),new Promise((t,e)=>{let r=setInterval(function(){!1!==a&&(clearInterval(r),t([h,a]))})})})}deletePost(t,e=\"\"){return fetch(`${this.urls.post}${t}`).then(this.responseToHtml).then(r=>{let n=$(r).find('[name*=\"token\"]')[0].value,i=new FormData;return i.set(\"securitytoken\",n),i.set(\"do\",\"deletepost\"),i.set(\"s\",\"\"),i.set(\"postid\",t),i.set(\"deletepost\",\"delete\"),i.set(\"reason\",e),$.ajax({type:\"POST\",url:this.urls.deletePost,data:i.toDataString()})})}sendPrivateMessage(t,e,r){let n=this;return fetch(`${this.urls.private}?do=newpm`).then(this.responseToHtml).then(t=>[t,$(t).find('[name*=\"token\"]')[0].value]).then(([i,s])=>{let o=new FormData;o.set(\"securitytoken\",s),o.set(\"recipients\",t),o.set(\"title\",e),o.set(\"message\",r),o.set(\"wysiwyg\",0),o.set(\"iconid\",0),o.set(\"s\",\"\"),o.set(\"do\",\"insertpm\"),o.set(\"pmid\",\"\"),o.set(\"forward\",\"\"),o.set(\"sbutton\",\"\"),o.set(\"savecopy\",1),o.set(\"signature\",1),o.set(\"parseurl\",1);let a=!1,h=!1;return $.ajax({type:\"POST\",url:`${n.urls.private}?do=insertpm&pmid=`,data:o.toDataString(),success:function(t){a=t,h=$(t).find(\"error\").toArray()}}),new Promise((t,e)=>{let r=setInterval(function(){!1!==h&&(clearInterval(r),t([a,h]))})})})}getThreadFromPostId(t){return fetch(`https://www.forocoches.com/foro/showthread.php?p=${t}`).then(this.responseToHtml).then(t=>{let e=$(t).find('[id*=\"postcount\"]')[0].href;return parseInt(new URL(e).searchParams.get(\"t\"))})}getMessagesFromThread(t,e=1){return fetch(`${this.urls.thread}${t}&page=${e}`).then(this.responseToHtml).then(t=>$(t).find('#posts div[align=\"center\"] table[id^=\"post\"]').toArray().slice(1).map(t=>{let e=$(t).find(\"td\"),r=$(e[2]).find(\".bigusername\")[0],n=$(t).find('[id*=\"post_message\"]')[0].outerHTML.trim();return{messageId:parseInt(t.id.slice(4)),uid:parseInt(r.href.split(\"=\")[1]),username:r.innerText.trim(),content:n}}))}getPagesFromThread(t){let e=$(t).find(\".pagenav .vbmenu_control\");return[(e=0!==e.length?(e=e[0].innerText.trim()).split(\" \"):[0,1,0,1])[1],e[3]].map(t=>parseInt(t))}getThreadById(t,e=1){let r;return $.ajax({type:\"GET\",url:`${this.urls.thread}${t}&page=${e}`,success:function(t){r=(new DOMParser).parseFromString(t,\"text/html\")},async:!1}),r}getIgnoredUserList(){return fetch(this.urls.ignoreList).then(this.responseToHtml).then(t=>{let e=$(t).find('#ignorelist input[type=\"checkbox\"]').toArray();e=e.filter(t=>t.checked);let r={};return e.length>0&&e.forEach(t=>{let e=t.value,n=t.parentElement.innerText.trim();r[e]=n}),r})}getMnQFromMessage(t){let e=[],r=[];try{e=$(t).find('b>a[href*=\"/member.php?u=\"]').toArray().map(t=>[parseInt(t.href.split(\"=\")[1]),t.innerText.trim()])}catch(t){console.log(t),e=[]}$(\"div.smallfont ~ table\").toArray().map(t=>({username:$(t).find(\"div b\")[0].innerText.trim(),postId:parseInt($(t).find(\"div b ~ a\")[0].href.split(\"=\")[1]),content:$(t).find(\"div ~ div\")[0].outerHTML}));try{r=$(t).find(\"div.smallfont ~ table\").toArray().map(t=>({username:$(t).find(\"div b\")[0].innerText.trim(),postId:parseInt($(t).find(\"div b ~ a\")[0].href.split(\"=\")[1]),content:$(t).find(\"div ~ div\")[0].outerHTML}))}catch(t){r=[]}return{mentions:e,quotes:r}}getNotifications(){return fetch(this.urls.usercp).then(this.responseToHtml).then(t=>{let e={pmCount:null,mentionsCount:null,quotesCount:null},r=(t=$(t)).find('strong + div:has(a[href=\"private.php?\"])').text();return e.pmCount=parseInt(r.split(\":\")[1].trim().split(\" \")[0]),r=t.find('[href=\"/foro/usertag.php?do=profilenotif&tab=mentions\"] span'),e.mentionsCount=parseInt(r[0].innerText),r=t.find('[href=\"/foro/usertag.php?do=profilenotif&tab=quotes\"] span'),e.quotesCount=parseInt(r[0].innerText),e})}}},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return n});class n{constructor(t){this.hostModule=t}log(...t){!0===this.hostModule.config.get(\"DEBUG_MODE\")&&(!0===this.hostModule.config.get(\"DEBUG_MODULE_NAME\")&&(t=[`[${this.hostModule.moduleName}]`,...t]),console.log(...t))}info(...t){!0===this.hostModule.config.get(\"DEBUG_MODE\")&&(!0===this.hostModule.config.get(\"DEBUG_MODULE_NAME\")&&(t=[`[${this.hostModule.moduleName}]`,...t]),console.info(...t))}warn(...t){!0===this.hostModule.config.get(\"DEBUG_MODE\")&&(!0===this.hostModule.config.get(\"DEBUG_MODULE_NAME\")&&(t=[`[${this.hostModule.moduleName}]`,...t]),console.warn(...t))}error(...t){!0===this.hostModule.config.get(\"DEBUG_MODE\")&&(!0===this.hostModule.config.get(\"DEBUG_MODULE_NAME\")&&(t=[`[${this.hostModule.moduleName}]`,...t]),console.error(...t))}alert(t){!0===this.hostModule.config.get(\"DEBUG_MODE\")&&(!0===this.hostModule.config.get(\"DEBUG_MODULE_NAME\")&&(t=`[${this.hostModule.moduleName}] ${t}`),alert(t))}}},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return i});var n=r(0);class i{constructor(t){this.module=t}has(t){return GM_getValue(n.b)[this.module.moduleName].hasOwnProperty(t)}get(t){return GM_getValue(n.b)[this.module.moduleName][t]}set(t,e){let r=GM_getValue(n.b);r[this.module.moduleName][t]=e,GM_setValue(n.b,r)}}},function(t,e,r){\"use strict\";r.d(e,\"a\",function(){return n});class n{constructor(t){this.styleSheet=null,this.styleElement=null,this.todoPool=[],this.moduleHost=t,this.styleElement=document.createElement(\"style\"),this.styleElement.setAttribute(\"isVirtual\",\"true\"),this.styleElement.setAttribute(\"moduleHost\",this.moduleHost.moduleName);const e=function(){document.head.appendChild(this.styleElement),this.styleSheet=this.styleElement.sheet,this.todoPool.forEach(t=>this.set(t.selector,t.cssText))}.bind(this);\"complete\"!==document.readyState?window.addEventListener(\"load\",e):e()}pretifySelector(t){const e=this.styleSheet.cssRules.length;return this.styleSheet.addRule(t,\"\"),t=this.styleSheet.cssRules[e].selectorText,this.styleSheet.removeRule(e),t}objectToCSS(t){return Object.keys(t).map(e=>`${e}: ${t[e]};`).join(\"\")}CSSToObject(t){const e={};return t.split(\"{\").slice(-1)[0].split(\"}\")[0].trim().split(\";\").forEach(t=>{let[r,n]=t.split(\":\");void 0!==r&&void 0!==n&&(e[r.trim()]=n.trim())}),e}get(t){if(null!==this.styleSheet){let e=null;t=t.trim();let r=Array.from(this.styleSheet.rules).filter((r,n)=>(e=null===e?n:e,r.selectorText===t));return r.length>0?(r=r[0]).index=e:r={index:-1},r}}set(t,e){if(\"string\"==typeof e&&(e=this.CSSToObject(e)),null!==this.styleSheet){t=this.pretifySelector(t);const r=this.get(t);let n={};r.index>-1&&(n=this.CSSToObject(r.cssText),this.styleSheet.removeRule(r.index)),Object.assign(n,e),this.styleSheet.addRule(t,this.objectToCSS(n))}else this.todoPool.push({selector:t,cssText:e});return this}}},function(t,e,r){var n=r(4),i=r(5),s=r(2).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function h(){this.init(),this._w=a,i.call(this,64,56)}function u(t,e,r){return r^t&(e^r)}function l(t,e,r){return t&e|r&(t|e)}function f(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function c(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function _(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(h,i),h.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},h.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,a=0|this._d,h=0|this._e,d=0|this._f,p=0|this._g,g=0|this._h,E=0;E<16;++E)r[E]=t.readInt32BE(4*E);for(;E<64;++E)r[E]=0|(((e=r[E-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[E-7]+_(r[E-15])+r[E-16];for(var m=0;m<64;++m){var y=g+c(h)+u(h,d,p)+o[m]+r[m]|0,w=f(n)+l(n,i,s)|0;g=p,p=d,d=h,h=a+y|0,a=s,s=i,i=n,n=y+w|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0,this._f=d+this._f|0,this._g=p+this._g|0,this._h=g+this._h|0},h.prototype._hash=function(){var t=s.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=h},function(t,e,r){var n=r(4),i=r(5),s=r(2).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function h(){this.init(),this._w=a,i.call(this,128,112)}function u(t,e,r){return r^t&(e^r)}function l(t,e,r){return t&e|r&(t|e)}function f(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function c(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function _(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function p(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function E(t,e){return t>>>0<e>>>0?1:0}n(h,i),h.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},h.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,s=0|this._dh,a=0|this._eh,h=0|this._fh,m=0|this._gh,y=0|this._hh,w=0|this._al,b=0|this._bl,v=0|this._cl,M=0|this._dl,T=0|this._el,A=0|this._fl,O=0|this._gl,D=0|this._hl,R=0;R<32;R+=2)e[R]=t.readInt32BE(4*R),e[R+1]=t.readInt32BE(4*R+4);for(;R<160;R+=2){var P=e[R-30],L=e[R-30+1],U=_(P,L),B=d(L,P),I=p(P=e[R-4],L=e[R-4+1]),S=g(L,P),C=e[R-14],k=e[R-14+1],N=e[R-32],$=e[R-32+1],x=B+k|0,j=U+C+E(x,B)|0;j=(j=j+I+E(x=x+S|0,S)|0)+N+E(x=x+$|0,$)|0,e[R]=j,e[R+1]=x}for(var H=0;H<160;H+=2){j=e[H],x=e[H+1];var G=l(r,n,i),F=l(w,b,v),W=f(r,w),Y=f(w,r),V=c(a,T),K=c(T,a),q=o[H],z=o[H+1],X=u(a,h,m),Q=u(T,A,O),J=D+K|0,Z=y+V+E(J,D)|0;Z=(Z=(Z=Z+X+E(J=J+Q|0,Q)|0)+q+E(J=J+z|0,z)|0)+j+E(J=J+x|0,x)|0;var tt=Y+F|0,et=W+G+E(tt,Y)|0;y=m,D=O,m=h,O=A,h=a,A=T,a=s+Z+E(T=M+J|0,M)|0,s=i,M=v,i=n,v=b,n=r,b=w,r=Z+et+E(w=J+tt|0,J)|0}this._al=this._al+w|0,this._bl=this._bl+b|0,this._cl=this._cl+v|0,this._dl=this._dl+M|0,this._el=this._el+T|0,this._fl=this._fl+A|0,this._gl=this._gl+O|0,this._hl=this._hl+D|0,this._ah=this._ah+r+E(this._al,w)|0,this._bh=this._bh+n+E(this._bl,b)|0,this._ch=this._ch+i+E(this._cl,v)|0,this._dh=this._dh+s+E(this._dl,M)|0,this._eh=this._eh+a+E(this._el,T)|0,this._fh=this._fh+h+E(this._fl,A)|0,this._gh=this._gh+m+E(this._gl,O)|0,this._hh=this._hh+y+E(this._hl,D)|0},h.prototype._hash=function(){var t=s.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=h},function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",function(){return ModuleHandler});var _debug_class__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_storage_class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_config_class__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_flaghandler_class__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_csshandler_class__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7),_fc_api__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),_module_class__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3),_definitions__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0);class ResourceHandler{static parseUrl(t){let e=null;if(\"#\"===t[0])return null;try{\"!\"===t[0]&&(t=t.slice(1));const r=(e=new URL(t)).protocol,n=e.pathname.replace(\"//\",\"/\");switch(e.protocol=\"https:\",e.pathname=n,r){case\"rgh:\":e.hostname=\"raw.githubusercontent.com\"}}catch(t){e=null}return e}static async unpackJSONlinks(t){return Promise.all(t.map((t,e)=>new Promise(function(r){let n=ResourceHandler.parseUrl(t);return null===n?r(null):n.pathname.endsWith(\".json\")?void fetch(n.toString(),_definitions__WEBPACK_IMPORTED_MODULE_8__.c).then(t=>t.json()).then(t=>r([t,e])).catch(()=>r(null)):r([n.href,e])})))}static async sortResources(t){const e=(t=t.filter(t=>null!==t)).sort(([{},t],[{},e])=>t-e).map(t=>t[0]).flat();return Array.from(new Set(e)).map((t,e)=>[t,e])}static async getSourceCode(t){return Promise.all(t.map(([t,e])=>new Promise(function(r){let n=ResourceHandler.parseUrl(t);return null===n?r(!1):n.pathname.endsWith(\".js\")?fetch(n.toString(),_definitions__WEBPACK_IMPORTED_MODULE_8__.c).then(t=>t.text()).then(t=>r([t,e])).catch(t=>{this.MODULE.debug.error(n.href,t),r(!1)}):r(!1)})))}static contextEval(source){return function(Debug,LocalStorage,Config,FlagHandler,CSSHandler,Module,FC,Utils,FC_MODULES,GLOBAL_ENTRY_NAME,VERSION_HASH,NO_CACHE_HEADERS){return eval(source)}(_debug_class__WEBPACK_IMPORTED_MODULE_0__.a,_storage_class__WEBPACK_IMPORTED_MODULE_1__.a,_config_class__WEBPACK_IMPORTED_MODULE_2__.a,_flaghandler_class__WEBPACK_IMPORTED_MODULE_3__.a,_csshandler_class__WEBPACK_IMPORTED_MODULE_4__.a,_module_class__WEBPACK_IMPORTED_MODULE_7__.a,_fc_api__WEBPACK_IMPORTED_MODULE_6__.a,_utils__WEBPACK_IMPORTED_MODULE_5__.a,_definitions__WEBPACK_IMPORTED_MODULE_8__.a,_definitions__WEBPACK_IMPORTED_MODULE_8__.b,_definitions__WEBPACK_IMPORTED_MODULE_8__.d,_definitions__WEBPACK_IMPORTED_MODULE_8__.c)}}class ModuleHandler{constructor(){this.modules=new Map;const t=this;this.MODULE=new _module_class__WEBPACK_IMPORTED_MODULE_7__.a({moduleName:\"MODULE_HANDLER\",title:\"Module handler\",author:\"pytness\",version:\"1.1\",match:[\"*\"]}),_definitions__WEBPACK_IMPORTED_MODULE_8__.a.push(this.MODULE),this.MODULE.config.getMeta(\"ENABLED\").flags.unset(\"CONFIGURABLE\"),this.MODULE.config.define(\"RESOURCES\",{title:\"User resources\",defaultValue:[\"rgh:Pytness/fc-modules/master/modules/defaultSources.json\"],flags:[\"CONFIGURABLE\"],getter:function(){let t=this.value.join(\"\\n\");return t.length>0&&(t+=\"\\n\"),_config_class__WEBPACK_IMPORTED_MODULE_2__.a.HTML.TEXTAREA.GETTER(t,{cols:80,rows:20})},parser:function(t){return _config_class__WEBPACK_IMPORTED_MODULE_2__.a.HTML.TEXTAREA.PARSER(t).split(\"\\n\").map(t=>t.trim()).filter(t=>\"\"!==t)}}).define(\"LAST_VERSION_HASH\",{defaultValue:!1}),this.MODULE.config.getMeta(\"ENABLED\").flags.unset(\"CONFIGURABLE\"),this.MODULE.onload=function(){t.MODULE.config.set(\"DEBUG_MODULE_NAME\",!1),t.MODULE.config.set(\"DEBUG_MODE\",!0),_definitions__WEBPACK_IMPORTED_MODULE_8__.d!=t.MODULE.config.get(\"LAST_VERSION_HASH\")&&t.MODULE.config.set(\"LAST_VERSION_HASH\",_definitions__WEBPACK_IMPORTED_MODULE_8__.d),t.loadUserResources().then(()=>t.loadModules())},this.modules.set(this.MODULE.moduleName,this.MODULE)}has(t){return this.modules.has(t)}get(t){return this.modules.get(t)}push(t){if(!(t instanceof _module_class__WEBPACK_IMPORTED_MODULE_7__.a))throw\"Module must be an instance of Module\";if(this.modules.has(t.moduleName))throw\"Module already declared\";this.modules.set(t.moduleName,t)}delete(t){return this.modules.delete(t)}keys(){return Array.from(this.modules.keys())}length(){return this.modules.size}registerModules(){let t=GM_getValue(_definitions__WEBPACK_IMPORTED_MODULE_8__.b);this.modules.forEach(e=>{Object.keys(t).includes(e.moduleName)||(t[e.moduleName]={})}),GM_setValue(_definitions__WEBPACK_IMPORTED_MODULE_8__.b,t)}sortModules(){this.modules.forEach(t=>{let e=t.moduleName;t.require.every(t=>{if(!this.modules.has(t))throw`Module '${e}' requires '${t}'`;if(this.modules.get(t).require.includes(e))throw`Modules '${e}' and '${t}' must not require each other`})});let t=Array.from(this.modules.entries());t.sort(([t,e],[r,n])=>e.require.includes(r)?1:n.require.includes(t)?-1:0),this.modules.clear(),t.forEach(([t,e])=>{this.modules.set(t,e)})}async loadUserResources(){let t=this.MODULE.config.get(\"RESOURCES\");return ResourceHandler.unpackJSONlinks(t).then(ResourceHandler.sortResources).then(ResourceHandler.getSourceCode).then(t=>{t.filter(t=>!1!==t).sort(([t,e],[r,n])=>e-n).forEach(([t,{}])=>{try{const e=ResourceHandler.contextEval(t);e instanceof _module_class__WEBPACK_IMPORTED_MODULE_7__.a&&_definitions__WEBPACK_IMPORTED_MODULE_8__.a.push(e)}catch(t){this.MODULE.debug.error(t)}})})}loadModules(){this.registerModules(),this.sortModules(),this.modules.forEach(t=>{t.loaded||(t.load()?this.MODULE.debug.log(`Loaded [${t.moduleName}]:`+`\\n\\tTitle:   ${t.info.title}`+`\\n\\tDesc:    ${t.info.description}`+`\\n\\tAuthor:  ${t.info.author}`+`\\n\\tVersion: ${t.info.version}`):this.MODULE.debug.log(\"Didnt load \",t.moduleName))})}unloadModules(){this.modules.forEach(t=>{t.loaded&&(t.unload(),this.MODULE.debug.log(`Unloaded [${t.moduleName}]`))})}reloadModules(){this.MODULE.debug.log(\"Reloading modules...\"),this.modules.forEach(t=>{t.loaded&&(t.onunload(),t.onload(),this.MODULE.debug.log(`Reloaded [${t.moduleName}]`))})}}},function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+\" is not supported (we accept pull requests)\");return new r}).sha=r(16),e.sha1=r(22),e.sha224=r(23),e.sha256=r(11),e.sha384=r(24),e.sha512=r(12)},function(t,e,r){\"use strict\";function n(t){return t.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g,\"\")}r.d(e,\"a\",function(){return s});class i{constructor(t){this.__loading__=!1,this.messageCount=null,this.signupDate=null,this.lastActivity=null,this.id=t,this.update()}waitUntilLoadingIsComplete(){return new Promise(t=>setInterval(()=>{!1===this.__loading__&&t()}))}async get(){return await this.waitUntilLoadingIsComplete(),this}get messagesPerDay(){if(null===this.messageCount||null===this.signupDate)return null;return(Date.now()-this.signupDate.getTime())/1e3/60/60/24}async update(){return!0===this.__loading__?this:(this.__loading__=!0,fetch(`${s.urls.user}${this.id}`).then(s.responseToHtml).then(t=>{if(null===t.querySelector(\".panelsurround\")){let e=Array.from(t.querySelectorAll(\".statistics_group .shade\")).map(t=>{let e=t.parentNode.innerText.split(\":\");return[n(e[0]).trim(),e.slice(1).join(\":\")]});e=Object.fromEntries(e),this.messageCount=parseInt(e[\"Mensajes Total\"].replace(\".\",\"\"));const r=s.parseFCDate(e[\"Ultima Actividad\"]);this.lastActivity=isNaN(r.getTime())?null:r;const i=s.parseFCDate(e[\"Fecha de Registro\"]);this.signupDate=isNaN(i.getTime())?null:i}return this.__loading__=!1,this}).catch(()=>(this.__loading__=!1,this)))}}class s{static utf8ToIso(t){let e=new TextDecoder(\"ISO-8859-1\");return t=new Uint8Array(t),e.decode(t)}static parseHTML(t){return(new DOMParser).parseFromString(t,\"text/html\")}static responseToHtml(t){return t.arrayBuffer().then(s.utf8ToIso).then(s.parseHTML)}static parseFCDate(t){if(\"string\"!=typeof t){let t=new Date;return t.setTime(NaN),t}t=t.trim().split(\" \");const e={ene:\"jan\",feb:\"feb\",mar:\"mar\",abr:\"apr\",may:\"may\",jun:\"jun\",jul:\"jul\",ago:\"aug\",sep:\"sep\",oct:\"oct\",nov:\"nov\",dic:\"dec\"};let r,n=new Date;if(n.setTime(864e5*Math.floor(Date.now()/864e5)),\"Ayer\"===t[0]?n.setTime(n.getTime()-864e5):\"Hoy\"!==t[0]&&((r=t[0].split(\"-\"))[1]=e[r[1]],n=new Date(Date.parse(r.join(\"-\")))),t.length>1){let e=Date.parse(`1-1-1970 ${t[1]} GMT`);n.setTime(n.getTime()+e)}return n}static async getCurrentUserId(){return null!==s.__userid__?s.__userid__:fetch(s.urls.usercp).then(s.responseToHtml).then(t=>{const e=t.querySelector('a[href^=\"member.php?u\"]');if(null!==e){let t=e.getAttribute(\"href\");void 0!==t&&(t=t.split(\"=\")[1]),s.__userid__=parseInt(t)}return s.__userid__})}static async getUserData(t){return new i(t).get()}}s.__userid__=null,s.urls={thread:\"https://www.forocoches.com/foro/showthread.php?t=\",post:\"https://www.forocoches.com/foro/showthread.php?p=\",deletePost:\"https://www.forocoches.com/foro/editpost.php\",user:\"https://www.forocoches.com/foro/member.php?u=\",quote:\"https://www.forocoches.com/foro/newreply.php?do=newreply&p=\",newPost:\"https://www.forocoches.com/foro/newreply.php?do=postreply&t=\",private:\"https://www.forocoches.com/foro/private.php\",ignoreList:\"https://www.forocoches.com/foro/profile.php?do=ignorelist\",usercp:\"https://www.forocoches.com/foro/usercp.php?\"}},function(t,e,r){var n=r(4),i=r(5),s=r(2).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,i.call(this,64,56)}function u(t){return t<<30|t>>>2}function l(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(h,i),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,a=0|this._d,h=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=r[f-3]^r[f-8]^r[f-14]^r[f-16];for(var c=0;c<80;++c){var _=~~(c/20),d=0|((e=n)<<5|e>>>27)+l(_,i,s,a)+h+r[c]+o[_];h=a,a=s,s=u(i),i=n,n=d}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var t=s.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},function(t,e,r){\"use strict\";(function(t){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nvar n=r(19),i=r(20),s=r(21);function o(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError(\"Invalid typed array length\");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,r){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,r);if(\"number\"==typeof t){if(\"string\"==typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return f(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if(\"number\"==typeof e)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError(\"'offset' is out of bounds\");if(e.byteLength<r+(n||0))throw new RangeError(\"'length' is out of bounds\");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=c(t,e);return t}(t,e,r,n):\"string\"==typeof e?function(t,e,r){\"string\"==typeof r&&\"\"!==r||(r=\"utf8\");if(!h.isEncoding(r))throw new TypeError('\"encoding\" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(h.isBuffer(e)){var r=0|_(e.length);return 0===(t=a(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if(\"undefined\"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||\"length\"in e)return\"number\"!=typeof e.length||(n=e.length)!=n?a(t,0):c(t,e);if(\"Buffer\"===e.type&&s(e.data))return c(t,e.data)}var n;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(t,e)}function l(t){if(\"number\"!=typeof t)throw new TypeError('\"size\" argument must be a number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|_(e)),!h.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function c(t,e){var r=e.length<0?0:0|_(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function _(t){if(t>=o())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+o().toString(16)+\" bytes\");return 0|t}function d(t,e){if(h.isBuffer(t))return t.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;\"string\"!=typeof t&&(t=\"\"+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return r;case\"utf8\":case\"utf-8\":case void 0:return H(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*r;case\"hex\":return r>>>1;case\"base64\":return G(t).length;default:if(n)return H(t).length;e=(\"\"+e).toLowerCase(),n=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return\"\";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return\"\";if((r>>>=0)<=(e>>>=0))return\"\";for(t||(t=\"utf8\");;)switch(t){case\"hex\":return L(this,e,r);case\"utf8\":case\"utf-8\":return O(this,e,r);case\"ascii\":return R(this,e,r);case\"latin1\":case\"binary\":return P(this,e,r);case\"base64\":return A(this,e,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return U(this,e,r);default:if(n)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function E(t,e,r,n,i){if(0===t.length)return-1;if(\"string\"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if(\"string\"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if(\"number\"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError(\"val must be string, number or Buffer\")}function m(t,e,r,n,i){var s,o=1,a=t.length,h=e.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===h)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){for(var f=!0,c=0;c<h;c++)if(u(t,s+c)!==u(e,c)){f=!1;break}if(f)return s}return-1}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=e.length;if(s%2!=0)throw new TypeError(\"Invalid hex string\");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function w(t,e,r,n){return F(H(e,t.length-r),t,r,n)}function b(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function v(t,e,r,n){return b(t,e,r,n)}function M(t,e,r,n){return F(G(e),t,r,n)}function T(t,e,r,n){return F(function(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,o,a,h,u=t[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(s=t[i+1]))&&(h=(31&u)<<6|63&s)>127&&(l=h);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(h=(15&u)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(l=h)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var r=\"\",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=D));return r}(n)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&\"function\"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,r){return u(null,t,e,r)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,\"undefined\"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?a(t,e):void 0!==r?\"string\"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},h.allocUnsafe=function(t){return f(null,t)},h.allocUnsafeSlow=function(t){return f(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},h.concat=function(t,e){if(!s(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=h.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!h.isBuffer(o))throw new TypeError('\"list\" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?\"\":0===arguments.length?O(this,0,t):p.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t=\"\",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString(\"hex\",0,r).match(/.{2}/g).join(\" \"),this.length>r&&(t+=\" ... \")),\"<Buffer \"+t+\">\"},h.prototype.compare=function(t,e,r,n,i){if(!h.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError(\"out of range index\");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),a=Math.min(s,o),u=this.slice(n,i),l=t.slice(e,r),f=0;f<a;++f)if(u[f]!==l[f]){s=u[f],o=l[f];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return E(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return E(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n=\"utf8\",r=this.length,e=0;else if(void 0===r&&\"string\"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");e|=0,isFinite(r)?(r|=0,void 0===n&&(n=\"utf8\")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");for(var s=!1;;)switch(n){case\"hex\":return y(this,t,e,r);case\"utf8\":case\"utf-8\":return w(this,t,e,r);case\"ascii\":return b(this,t,e,r);case\"latin1\":case\"binary\":return v(this,t,e,r);case\"base64\":return M(this,t,e,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return T(this,t,e,r);default:if(s)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function R(t,e,r){var n=\"\";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){var n=\"\";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function L(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i=\"\",s=e;s<r;++s)i+=j(t[s]);return i}function U(t,e,r){for(var n=t.slice(e,r),i=\"\",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function B(t,e,r){if(t%1!=0||t<0)throw new RangeError(\"offset is not uint\");if(t+e>r)throw new RangeError(\"Trying to access beyond buffer length\")}function I(t,e,r,n,i,s){if(!h.isBuffer(t))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('\"value\" argument is out of bounds');if(r+n>t.length)throw new RangeError(\"Index out of range\")}function S(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function C(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function k(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function N(t,e,r,n,s){return s||k(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function $(t,e,r,n,s){return s||k(t,0,r,8),i.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=h.prototype;else{var i=e-t;r=new h(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},h.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},h.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},h.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},h.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||I(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},h.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):C(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);I(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);I(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):C(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):C(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return $(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return $(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError(\"targetStart out of bounds\");if(r<0||r>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,s=n-r;if(this===t&&r<e&&e<n)for(i=s-1;i>=0;--i)t[i+e]=this[i+r];else if(s<1e3||!h.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},h.prototype.fill=function(t,e,r,n){if(\"string\"==typeof t){if(\"string\"==typeof e?(n=e,e=0,r=this.length):\"string\"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&\"string\"!=typeof n)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof n&&!h.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n)}else\"number\"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError(\"Out of range index\");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),\"number\"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=h.isBuffer(t)?t:H(new h(t,n).toString()),a=o.length;for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var x=/[^+\\/0-9A-Za-z-_]/g;function j(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function H(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function G(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}(t).replace(x,\"\")).length<2)return\"\";for(;t.length%4!=0;)t+=\"=\";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(18))},function(t,e){var r;r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(r=window)}t.exports=r},function(t,e,r){\"use strict\";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=u(t),n=r[0],o=r[1],a=new s(function(t,e,r){return 3*(e+r)/4-r}(0,n,o)),h=0,l=o>0?n-4:n,f=0;f<l;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=255&e;2===o&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,a[h++]=255&e);1===o&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,a[h++]=e>>8&255,a[h++]=255&e);return a},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(l(t,o,o+16383>a?a:o+16383));1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+\"==\")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+\"=\"));return s.join(\"\")};for(var n=[],i=[],s=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",a=0,h=o.length;a<h;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var r=t.indexOf(\"=\");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var i,s,o=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join(\"\")}i[\"-\".charCodeAt(0)]=62,i[\"_\".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,h=(1<<a)-1,u=h>>1,l=-7,f=r?i-1:0,c=r?-1:1,_=t[e+f];for(f+=c,s=_&(1<<-l)-1,_>>=-l,l+=a;l>0;s=256*s+t[e+f],f+=c,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+t[e+f],f+=c,l-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(_?-1:1);o+=Math.pow(2,n),s-=u}return(_?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,h,u=8*s-i-1,l=(1<<u)-1,f=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:s-1,d=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+f>=1?c/h:c*Math.pow(2,1-f))*h>=2&&(o++,h/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(e*h-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+_]=255&a,_+=d,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+_]=255&o,_+=d,o/=256,u-=8);t[r+_-d]|=128*p}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==r.call(t)}},function(t,e,r){var n=r(4),i=r(5),s=r(2).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,i.call(this,64,56)}function u(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function f(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(h,i),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,a=0|this._d,h=0|this._e,c=0;c<16;++c)r[c]=t.readInt32BE(4*c);for(;c<80;++c)r[c]=(e=r[c-3]^r[c-8]^r[c-14]^r[c-16])<<1|e>>>31;for(var _=0;_<80;++_){var d=~~(_/20),p=u(n)+f(d,i,s,a)+h+r[_]+o[d]|0;h=a,a=s,s=l(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var t=s.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},function(t,e,r){var n=r(4),i=r(11),s=r(5),o=r(2).Buffer,a=new Array(64);function h(){this.init(),this._w=a,s.call(this,64,56)}n(h,i),h.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=h},function(t,e,r){var n=r(4),i=r(12),s=r(5),o=r(2).Buffer,a=new Array(160);function h(){this.init(),this._w=a,s.call(this,128,112)}n(h,i),h.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=h},function(t,e,r){\"use strict\";r.r(e);var n=r(13),i=r(0),s=r(7),o=r(3),a=r(1);const h=jQuery;console.log(`Version hash: ${i.d}`),GM_addStyle(GM_getResourceText(\"noty_css\")),GM_addStyle(GM_getResourceText(\"styles\")),Object(i.e)(new n.a),i.a.push(function(t){const e=new o.a({moduleName:\"CONTROL_PANEL\",title:\"Panel de control\",description:\"Panel de control para administrar mdulos\",author:\"pytness\",version:\"0.1\",runat:\"load\",match:[\"*\"]}),r='<img src=\\'https://cdnjs.cloudflare.com/ajax/libs/octicons/8.3.0/svg/gear.svg\\' class=\"config-button\" height=\"16\" />',n='<span class=\"reset-button\" title=\"Reset value\"></span>';let u='<table class=\"module_menu\"><tr class=\"title\"><td>Name</td><td>Version</td><td>Enabled</td></tr></table>';const l='<span class=\"swal2-close backbutton\"></span>';function f(e){let r=h(e).find(\"#swal2-title\").attr(\"moduleName\"),n=t.get(r);h(e).find(\"tr.section, tr.section+tr\").each(({},t)=>{let e=h(t).find(\"td\").toArray();e.length>2&&e.shift();let r=e[0].getAttribute(\"key\");const i=n.config.getMeta(r);i.flags.isset(\"WIDGET\")||n.config.set(r,i.parseHTML(h(e[1])))})}async function c(e){let r=t.get(e),i=h(\"<div>\"),s=h('<table class=\"module_menu config_tab\"><tr class=\"title\"><td>Section</td><td>Key</td><td>Value</td></tr></table>'),o=r.config.keys();o.splice(o.indexOf(\"ENABLED\"),1);let a=new Map;o.forEach(t=>{const e=r.config.getMeta(t).section;a.has(e)||a.set(e,[]),a.get(e).push(t)}),function(){const t=a.get(\"Debug\");a.delete(\"Debug\");let e=Array.from(a.entries());return e.push([\"Debug\",t]),e}().forEach(([t,e])=>{e.forEach((i,o)=>{let a=r.config.getMeta(i);if(void 0!==a&&(a.flags.isset(\"CONFIGURABLE\")||a.flags.isset(\"WIDGET\"))){let r=h(`<tr><td key=\"${i}\"><span ctitle></span><span reset_tag></span></td><td cvalue></td></tr>`);r.find(\"[ctitle]\").html(a.title),void 0!==a.description&&r.find(`[key=\"${i}\"]`).attr(\"title\",a.description),a.flags.isset(\"WIDGET\")||r.find(\"[reset_tag]\").html(n);let u=a.getHTML();h(r.find(\"td[cvalue]\")[0]).append(u),s.append(r),0===o&&(r.addClass(\"section\"),h(r.find(\"td\")[0]).before(`<td rowspan=\"${e.length}\">${t}</td>`))}})}),i.append(s);let u=null;return Swal.fire({title:r.info.title,html:i,heightAuto:!1,showConfirmButton:!0,showCancelButton:!0,reverseButtons:!0,cancelButtonColor:\"#E03A3A\",animation:!1,customClass:\"with-max-height swal-wide\",onOpen:function(t){(u=t).focus(),h(u).find(\".swal2-title\").attr(\"moduleName\",e),h(u).find(\".swal2-title\").append(h(`${l}`)),h(u).find(\".swal2-title\").css({left:\"32px\"}),h(u).on(\"click\",\".swal2-close.backbutton\",function(){f(u),Swal.close(),_()}),r.config.keys().forEach(t=>{let e=r.config.getMeta(t),n=h(u).find(`tr:has(td[key=\"${t}\"]) td[cvalue]`)[0];void 0===n||(e.dispatchEvent(\"HTMLAppended\",n),e.flags.isset(\"WIDGET\"))||h(u).find(`td[key=\"${t}\"] span.reset-button`)[0].addEventListener(\"click\",function(){r.config.reset(t,!1),e.dispatchEvent(\"reset\");let i=h(n);i.children().remove(),i.append(r.config.getMeta(t).getHTML()),e.dispatchEvent(\"HTMLAppended\",n)})})},preConfirm:()=>{f(u)}}).then(t=>{void 0!==t.dismiss&&(r.config.loadSavedConfig(),r.config.keys().forEach(t=>r.config.getMeta(t).dispatchEvent(\"cancel\")))})}function _(){let e=h(u);const n=t.keys().sort((e,r)=>{const n=t.get(e).info.title,i=t.get(r).info.title;return n.localeCompare(i)});return n.splice(n.indexOf(\"CONTROL_PANEL\"),1),n.splice(n.indexOf(\"MODULE_HANDLER\"),1),n.forEach(r=>{let n=t.get(r);const i=h(`<tr id='${n.moduleName}'>\\n\\t\\t\\t\\t<td><span>${n.info.title}</span></td>\\n\\t\\t\\t\\t<td>${n.info.version}</td>\\n\\t\\t\\t\\t<td></td>\\n\\t\\t\\t</tr>`);h(i.find(\"td\")[2]).append(n.config.getMeta(\"ENABLED\").getHTML()),i.find(\"td\")[0].setAttribute(\"title\",n.info.description),e.append(i)}),Swal.fire({title:\"Config panel\",html:e,heightAuto:!1,showConfirmButton:!1,showCloseButton:!0,animation:!1,customClass:\"with-max-height\",onOpen:e=>{e.focus();let n=h(r);n.attr(\"height\",\"32px\"),h(e).find(\".swal2-close\").before(n),n.on(\"click\",()=>c(\"CONTROL_PANEL\")),h(e).find(\"tr\").each(({},t)=>{let e=h(t).find(\"span\")[0];void 0!==e&&e.addEventListener(\"click\",function(){c(t.id)})}),t.keys().forEach(r=>{const n=h(h(e).find(`tr[id=\"${r}\"] td`)[2]);if(void 0===n)return;const i=t.get(r),s=i.config.getMeta(\"ENABLED\");n.find(\"input\").on(\"change\",function(){let t=s.parseHTML(n);i.config.set(\"ENABLED\",t)})})}})}return e.config.getMeta(\"ENABLED\").flags.unset(\"CONFIGURABLE\"),e.config.define(\"TOGGLE_COLOR\",{title:\"Toogle color\",defaultValue:\"#b4d455\",flags:[\"CONFIGURABLE\"],getter:function(){return a.a.HTML.COLOR.GETTER(this.value)},parser:function(t){let r=a.a.HTML.COLOR.PARSER(t);return e.styles.set(\"input.toogle:checked+label\",{\"background-color\":r}),r},events:{HTMLAppended:function({},t){h(t).find(\"input\")[0].addEventListener(\"input\",function({}){e.styles.set(\"input.toogle:checked+label\",{\"background-color\":this.value})})},reset:function(){e.styles.set(\"input.toogle:checked+label\",{\"background-color\":this.defaultValue})},cancel:function(){e.styles.set(\"input.toogle:checked+label\",{\"background-color\":this.value})}}}).hook(t.get(\"MODULE_HANDLER\"),\"RESOURCES\",\"RESOURCES\",{title:\"User resources\",flags:[\"CONFIGURABLE\"],getter:function(){let t=this.value.join(\"\\n\");return t+=\"\"===t?\"\":\"\\n\",a.a.HTML.TEXTAREA.GETTER(t,{cols:80,rows:20})},parser:function(t){return a.a.HTML.TEXTAREA.PARSER(t).split(\"\\n\").map(t=>t.trim()).filter(t=>\"\"!==t)}}),e.onload=function(){if(s.a.isMobileVersion){const t=h(r);t.attr(\"height\",24),h(\".mobilebuttonslide\").before(t),t.on(\"click\",function(t){Swal.isVisible()||(t.preventDefault(),_())})}else Mousetrap.bind(\"esc\",function(t){Swal.isVisible()||(t.preventDefault(),_())});e.styles.set(\"input.toogle:checked+label\",{\"background-color\":e.config.get(\"TOGGLE_COLOR\")});const t=i.d.slice(0,8);s.a.isMobileVersion||(h('[id=\"AutoNumber1\"] tbody tr td')[1].innerText=`Version hash: [${t}]`)},e}(i.a)),i.a.loadModules()}]);","extractedComments":[]}